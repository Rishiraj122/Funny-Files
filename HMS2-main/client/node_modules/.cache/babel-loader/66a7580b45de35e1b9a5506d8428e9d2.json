{"ast":null,"code":"var _jsxFileName = \"/Users/sherlock/Desktop/Actual Project/HMS2-main/client/src/components/MyBill.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport jwt from \"jsonwebtoken\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MyBill = () => {\n  _s();\n\n  const history = useHistory();\n  const [messbill, setMessbill] = useState('');\n  const [hostelbill, setHostelbill] = useState('');\n  const [roll, setRoll] = useState('');\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n\n    if (token) {\n      const user = jwt.decode(token);\n\n      if (!user) {\n        localStorage.removeItem('token');\n        history.replace('/login');\n      }\n\n      getBill();\n    } else {\n      history.push('/login');\n    }\n  });\n\n  const getBill = () => {\n    const token = localStorage.getItem('token');\n    const user = jwt.decode(token);\n    fetch('http://localhost:1337/api/mybill').then(response => response.json()).then(json => {\n      console.log(json.user.messbill);\n      console.log(json.user.hostelbill);\n      setMessbill(json.user.messbill);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"My Bill\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Mess Bill: \", messbill]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 9\n  }, this);\n};\n\n_s(MyBill, \"wGtaFRYkirAynDZYirzL57wmqFQ=\", false, function () {\n  return [useHistory];\n});\n\n_c = MyBill;\nexport default MyBill;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyBill\");","map":{"version":3,"sources":["/Users/sherlock/Desktop/Actual Project/HMS2-main/client/src/components/MyBill.js"],"names":["React","useEffect","useState","useHistory","jwt","MyBill","history","messbill","setMessbill","hostelbill","setHostelbill","roll","setRoll","token","localStorage","getItem","user","decode","removeItem","replace","getBill","push","fetch","then","response","json","console","log"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,SAAd,EAAyBC,QAAzB,QAAwC,OAAxC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,GAAP,MAAgB,cAAhB;;;AAEA,MAAMC,MAAM,GAAC,MAAI;AAAA;;AACb,QAAMC,OAAO,GAACH,UAAU,EAAxB;AACA,QAAM,CAACI,QAAD,EAAWC,WAAX,IAAwBN,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACO,UAAD,EAAaC,aAAb,IAA4BR,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACS,IAAD,EAAOC,OAAP,IAAgBV,QAAQ,CAAC,EAAD,CAA9B;AAEAD,EAAAA,SAAS,CAAC,MAAI;AACV,UAAMY,KAAK,GAACC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;;AACA,QAAGF,KAAH,EAAS;AACL,YAAMG,IAAI,GAAGZ,GAAG,CAACa,MAAJ,CAAWJ,KAAX,CAAb;;AACA,UAAG,CAACG,IAAJ,EAAS;AACLF,QAAAA,YAAY,CAACI,UAAb,CAAwB,OAAxB;AACAZ,QAAAA,OAAO,CAACa,OAAR,CAAgB,QAAhB;AACH;;AACDC,MAAAA,OAAO;AACV,KAPD,MAQI;AACAd,MAAAA,OAAO,CAACe,IAAR,CAAa,QAAb;AACH;AACJ,GAbQ,CAAT;;AAeA,QAAMD,OAAO,GAAC,MAAI;AACd,UAAMP,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,UAAMC,IAAI,GAAGZ,GAAG,CAACa,MAAJ,CAAWJ,KAAX,CAAb;AAEAS,IAAAA,KAAK,CAAC,kCAAD,CAAL,CACCC,IADD,CACOC,QAAD,IAAYA,QAAQ,CAACC,IAAT,EADlB,EAECF,IAFD,CAEOE,IAAD,IAAQ;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACT,IAAL,CAAUT,QAAtB;AACAmB,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACT,IAAL,CAAUP,UAAtB;AACAD,MAAAA,WAAW,CAACiB,IAAI,CAACT,IAAL,CAAUT,QAAX,CAAX;AACH,KAND;AAOH,GAXD;;AAaA,sBACI;AAAA,4BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI;AAAA,gCAAeA,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAMH,CAxCD;;GAAMF,M;UACYF,U;;;KADZE,M;AAyCN,eAAeA,MAAf","sourcesContent":["import React,{useEffect, useState} from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport jwt from \"jsonwebtoken\";\n\nconst MyBill=()=>{\n    const history=useHistory();\n    const [messbill, setMessbill]=useState('');\n    const [hostelbill, setHostelbill]=useState('');\n    const [roll, setRoll]=useState('');\n\n    useEffect(()=>{\n        const token=localStorage.getItem('token');\n        if(token){\n            const user = jwt.decode(token)\n            if(!user){\n                localStorage.removeItem('token');\n                history.replace('/login')\n            }\n            getBill();\n        }\n        else{\n            history.push('/login')\n        }\n    })\n\n    const getBill=()=>{\n        const token = localStorage.getItem('token');\n        const user = jwt.decode(token)\n\n        fetch('http://localhost:1337/api/mybill')\n        .then((response)=>response.json())\n        .then((json)=>{\n            console.log(json.user.messbill);\n            console.log(json.user.hostelbill);\n            setMessbill(json.user.messbill);\n        })\n    }\n\n    return(\n        <div>\n            <h1>My Bill</h1>\n            <p>Mess Bill: {messbill}</p>\n        </div>\n    )\n} \nexport default MyBill;"]},"metadata":{},"sourceType":"module"}