{"ast":null,"code":"var _jsxFileName = \"/Users/sherlock/Desktop/Actual Project/HMS2-main/client/src/components/MenuDisplay.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport jwt from 'jsonwebtoken';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MenuDisplay = () => {\n  _s();\n\n  const history = useHistory();\n\n  const goback = () => {\n    window.location.href = '/studentdashboard';\n  };\n\n  const [vegfood, setVegfood] = useState([]);\n  const [nonvegfood, setNonvegfood] = useState([]);\n  const item = [];\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n\n    if (token) {\n      const user = jwt.decode(token);\n\n      if (!user) {\n        localStorage.removeItem('token');\n        history.replace('/studentlogin');\n      } else {\n        getData();\n      }\n    } else {\n      history.push('/studentlogin');\n    }\n  });\n\n  const getData = () => {\n    const token = localStorage.getItem('token');\n    const user = jwt.decode(token);\n    fetch('http://localhost:1337/api/foodtoday').then(response => response.json()).then(json => {\n      for (let i = 0; i < json.user.length; i = i + 1) {\n        setVegfood(json.user[i].vegfood);\n        setNonvegfood(json.user[i].nonvegfood);\n      }\n    });\n    return {\n      item\n    };\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"Today's Menu:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Veg Item: \", vegfood]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Non Veg Item: \", nonvegfood]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, this);\n};\n\n_s(MenuDisplay, \"1M71a8/zZOp1IjjpXNqn1Bi2od4=\", false, function () {\n  return [useHistory];\n});\n\n_c = MenuDisplay;\nexport default MenuDisplay;\n\nvar _c;\n\n$RefreshReg$(_c, \"MenuDisplay\");","map":{"version":3,"sources":["/Users/sherlock/Desktop/Actual Project/HMS2-main/client/src/components/MenuDisplay.js"],"names":["React","useEffect","useState","jwt","useHistory","MenuDisplay","history","goback","window","location","href","vegfood","setVegfood","nonvegfood","setNonvegfood","item","token","localStorage","getItem","user","decode","removeItem","replace","getData","push","fetch","then","response","json","i","length"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,GAAP,MAAgB,cAAhB;AACA,SAASC,UAAT,QAA2B,kBAA3B;;;AAGA,MAAMC,WAAW,GAAC,MAAI;AAAA;;AAClB,QAAMC,OAAO,GAACF,UAAU,EAAxB;;AAEA,QAAMG,MAAM,GAAC,MAAI;AACbC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAqB,mBAArB;AACH,GAFD;;AAIA,QAAM,CAACC,OAAD,EAASC,UAAT,IAAqBV,QAAQ,CAAC,EAAD,CAAnC;AACA,QAAM,CAACW,UAAD,EAAYC,aAAZ,IAA2BZ,QAAQ,CAAC,EAAD,CAAzC;AACA,QAAMa,IAAI,GAAC,EAAX;AAEAd,EAAAA,SAAS,CAAC,MAAI;AACV,UAAMe,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;;AACA,QAAGF,KAAH,EAAS;AACL,YAAMG,IAAI,GAAGhB,GAAG,CAACiB,MAAJ,CAAWJ,KAAX,CAAb;;AACA,UAAG,CAACG,IAAJ,EAAS;AACLF,QAAAA,YAAY,CAACI,UAAb,CAAwB,OAAxB;AACAf,QAAAA,OAAO,CAACgB,OAAR,CAAgB,eAAhB;AACH,OAHD,MAGK;AACDC,QAAAA,OAAO;AACV;AACJ,KARD,MAQM;AACFjB,MAAAA,OAAO,CAACkB,IAAR,CAAa,eAAb;AACH;AACJ,GAbQ,CAAT;;AAcA,QAAMD,OAAO,GAAC,MAAI;AACd,UAAMP,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,UAAMC,IAAI,GAAGhB,GAAG,CAACiB,MAAJ,CAAWJ,KAAX,CAAb;AACAS,IAAAA,KAAK,CAAC,qCAAD,CAAL,CACCC,IADD,CACOC,QAAD,IAAYA,QAAQ,CAACC,IAAT,EADlB,EAECF,IAFD,CAEOE,IAAD,IAAQ;AACV,WAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACD,IAAI,CAACT,IAAL,CAAUW,MAAxB,EAA+BD,CAAC,GAACA,CAAC,GAAC,CAAnC,EAAqC;AACjCjB,QAAAA,UAAU,CAACgB,IAAI,CAACT,IAAL,CAAUU,CAAV,EAAalB,OAAd,CAAV;AACAG,QAAAA,aAAa,CAACc,IAAI,CAACT,IAAL,CAAUU,CAAV,EAAahB,UAAd,CAAb;AACH;AACJ,KAPD;AAQA,WAAO;AAACE,MAAAA;AAAD,KAAP;AACH,GAZD;;AAaA,sBACI;AAAA,4BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI;AAAA,+BAAcJ,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,eAGI;AAAA,mCAAkBE,UAAlB;AAAA;AAAA;AAAA;AAAA;AAAA,YAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAOH,CA7CD;;GAAMR,W;UACYD,U;;;KADZC,W;AA+CN,eAAeA,WAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport jwt from 'jsonwebtoken'\nimport { useHistory } from 'react-router-dom'\n\n\nconst MenuDisplay=()=>{\n    const history=useHistory()\n\n    const goback=()=>{\n        window.location.href='/studentdashboard'\n    }\n\n    const [vegfood,setVegfood]=useState([]);\n    const [nonvegfood,setNonvegfood]=useState([]);\n    const item=[];\n\n    useEffect(()=>{\n        const token = localStorage.getItem('token');\n        if(token){\n            const user = jwt.decode(token);\n            if(!user){\n                localStorage.removeItem('token');\n                history.replace('/studentlogin');\n            }else{\n                getData();                \n            }\n        } else{\n            history.push('/studentlogin');\n        }\n    })\n    const getData=()=>{\n        const token = localStorage.getItem('token')\n        const user = jwt.decode(token);\n        fetch('http://localhost:1337/api/foodtoday')\n        .then((response)=>response.json())\n        .then((json)=>{\n            for(let i=0;i<json.user.length;i=i+1){\n                setVegfood(json.user[i].vegfood);\n                setNonvegfood(json.user[i].nonvegfood);\n            }\n        })\n        return {item}\n    }\n    return(\n        <div>\n            <h4>Today's Menu:</h4>\n            <p>Veg Item: {vegfood}</p>\n            <p>Non Veg Item: {nonvegfood}</p>\n        </div>\n    )\n}\n\nexport default MenuDisplay"]},"metadata":{},"sourceType":"module"}